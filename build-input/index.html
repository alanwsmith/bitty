<!DOCTYPE html>

[@ data.reminder @]

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bitty.js</title>
    <link rel="shortcut icon" href="/favicons/favicon.ico" />
    <meta property="og:title" content="bitty.js" />
    <meta
      property="og:description"
      content="small component - big reactivity - vanilla js"
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bitty-js.alanwsmith.com/" />
    <meta
      property="og:image"
      content="https://bitty-js.alanwsmith.com/images/og-image-main.jpg"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/favicons/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/favicons/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/favicons/favicon-32x32.png"
    />
    <link rel="manifest" href="/favicons/site.webmanifest" />
    <link
      rel="mask-icon"
      href="/favicons/safari-pinned-tab.svg"
      color="#5bbad5"
    />
    <meta
      name="description"
      content="small component - bit reactivity - vanilla js"
    />
    <link rel="stylesheet" href="/styles/main.css" />
  </head>

  <body>
    <header class="default-wrapper header-flex small-font xlarge-bottom-margin">
      <div class="header-flex-2">
        <div>
          made by <a href="https://www.alanwsmith.com/">alan w smith</a>
        </div>
        <a href="https://github.com/alanwsmith/bitty-js">source</a>
        <a href="https://links.alanwsmith.com/">other projects</a>
        <a href="https://socials.alanwsmith.com/">socials</a>
      </div>
      <github-stars
        :repo="alanwsmith/bitty-js"
        :text-color="var(--accent-faded)"
        :background-color="var(--background)"
      ></github-stars>
    </header>
    <main class="default-wrapper default-flow">
      <hgroup>
        <h1>bitty.js</h1>
        <div class="hgroup-flex">
          <div class="small-font accent-faded">
            small component - big reactivity - vanilla js
          </div>
        </div>
      </hgroup>

      <h2>Hello, bitty</h2>

      [@ data.reminder @]

      <p>Bitty is a vanilla web component. It makes other elements reactive.</p>
      <p>
        This page has examples covering all of bitty's features. This counter is
        the first one. Click it to make the number go up.
      </p>
      <div
        class="make-two-columns warning-border-faded default-radius xxlarge-inline-margin"
      >
        [@ data.misc_html["counter.html"].raw @]
      </div>
      <p>The code looks like this:</p>

      <div>
        <div>
          <pre
            class="code-block"
          ><code>[@- data.misc_html["counter.html"].highlighted -@]</code></pre>
        </div>
        <div>
          <pre
            class="code-block"
          ><code>[@- data.example_scripts["counter.js"].highlighted -@]</code></pre>
        </div>
      </div>

      <p>
        The sections below provide details about how everything works. Check
        them out to dig in.
      </p>

      <details>
        <summary>Quick-Start</summary>
        <p>[This is a place holder stub while the content is being written]</p>
      </details>

      <details>
        <summary>Counter Details (Basic Functionality Overview)</summary>

        [@ data.reminder @]

        <h3>Preface</h3>

        <p>
          This section uses a detailed breakdown of the counter example to look
          at the core reactive functionality bitty provides. Skip down to the
          <em>Basic Examples</em> section if you'd prefer looking at code
          samples to get a handle on things. They're laid out starting with the
          basics to support a general run through.
        </p>

        <h3>Starting With The Pieces</h3>

        <p>
          Three pieces of code come together to generate the counter example:
        </p>
        <ol>
          <li>
            <p>
              A script tag that loads the <code>bitty.js</code> file as a
              module:
            </p>

            <pre
              class="code-block"
            ><code>[@- data.misc_html["script-tag.html"].highlighted -@]</code></pre>
          </li>
          <li>
            <p>A <code>bitty-js</code> tag with a <code>button</code> in it:</p>

            <pre
              class="code-block"
            ><code>[@- data.misc_html["counter.html"].highlighted -@]</code></pre>
          </li>

          <li>
            <p>A <code>counter.js</code> file:</p>

            <pre
              class="code-block"
            ><code>[@- data.example_scripts["counter.js"].highlighted -@]</code></pre>
          </li>
        </ol>

        <h3>The <code>bitty-js</code> tag</h3>

        [@ data.reminder @]

        <ul>
          <li>
            <p>
              <code>bitty.js</code> is a vanilla web component file. It provides
              a <code>&lt;bitty-js&gt;&lt;/bitty-js&gt;</code> tag. Wrapping
              other tags with it gives them reactive powers.
            </p>
            <p>
              Temporarily removing the <code>button</code> from our example
              gives us this <code>bitty-js</code> tag as a starting point:
            </p>
            <pre class="code-block"><code>
              [@- data.misc_html["counter-bitty-example.html"].highlighted -@]</code></pre>
          </li>
          <li>
            <p>
              <code>&lt;bitty-js&gt;&lt;/bitty-js&gt;</code>
              tags require a
              <code>data-bridge</code> attribute.
            </p>
            <p>
              The <code>data-bridge</code> attribute value is a path to a
              JavaScript module file (<code>counter.js</code> in our case).
              bitty imports that file an loads a class that provides the
              funcitons that are called when interations happen. (<code
                >Widget</code
              >
              by default but you can change that.
            </p>
            <p class="warning">
              (TODO: See about loading a default export instead of implicitly
              looking for Widget.)
            </p>
          </li>
          <li>
            <p>
              Other <code>data-*</code> attributes are optional
              <code>bitty-js</code>. For example, the
              <code>data-send</code> attribute which will come back to shortly.
            </p>
          </li>
        </ul>

        <h4>
          The <code>data-r</code>, <code>data-c</code>, and
          <code>data-s</code> attributes
        </h4>

        <ul>
          <li>
            <p>
              The reactivity bitty provides is managed by adding
              <code>data-*</code> attributes to tags/elements. The three main
              attributes are:
            </p>
            <ul>
              <li>
                <code>data-r</code><br />
                Registers an element to <em>receive</em> notification sent via
                <code>data-s</code> attributes.
              </li>
              <li>
                <code>data-c</code><br />
                <em>Calls</em> functions without sending notifications.
              </li>
              <li>
                <code>data-s</code><br />
                <em>Sends</em> notifications to elements with corresponding
                <code>data-r</code> attributes.
              </li>
            </ul>
          </li>
        </ul>

        <h4><code>button</code> Tag Registration</h4>

        <ul>
          <li>
            <p>
              The button in our counter example has all three of the main
              <code>data-*</code> attributes:
            </p>

            <pre class="code-block"><code>
              [@- data.misc_html["counter-button-example.html"].highlighted -@]</code></pre>
          </li>
          <li>
            <p>
              <code>bitty-js</code> elements go through all their children
              looking for <code>data-r</code> attributes when they initialize.
              Any children with the attribute get added (aka
              <em>registered</em>) to a list of elements whose
              <code>data-r</code> attributes all have the same value (<code
                >showNumber</code
              >
              in our example).
            </p>
          </li>
          <li>[TKTKTK: describe how the callback function is defined]</li>
          <li>
            <code>bitty-js</code> elements attach generic event listeners to
            themselves after creating the element lists. Events from our example
            button bubble up into those listeners.
          </li>
        </ul>

        <h4>Clicking the <code>button</code></h4>

        <p>
          Four things happen when you click the button in our example. They
          occur in this order:
        </p>
        <ol>
          <li>
            The button fires a <em>click</em> event that gets picked up by the
            <code>bitty-js</code> element.
          </li>
          <li>
            <p>
              The <code>bitty-js</code> element checks to see if the element
              that sent the click event (i.e. our button) has a
              <code>data-c</code> attribute. When it finds it, it uses the
              attribute's value (<code>addOne</code>) to call the
              <code>_addOne</code> function from the <code>Wires</code> class
              export. We'll look at that function's code a momentarily.
            </p>
            <p>
              (NOTE: The <code>_</code> (underscore) is prepended to the
              function name automatically. It's part of the overall naming
              convention that's details in the
              <em>Naming Convention</em> section below.)
            </p>
          </li>

          <li>
            <p>
              After the <code>_addOne</code> function runs, the
              <code>bitty-js</code> element looks back at the button element to
              see if it has a <code>data-s</code> attribute.
            </p>
            <p>
              When it finds it, it uses its value (<code>showNumber</code>) to
              run through all the elements in the list with that name that was
              assembled earlier with all the elements that have a
              <code>data-r="showNumber"</code> attribute.
            </p>
            <p>
              [TKTKTK: rephrase this and the earlier note to describe the list
              as a list of receivers].
            </p>
            <p>
              Each element in the list is run through the
              <code>$showNumber</code> function from the
              <code>Wires</code> export. As with the <code>_</code> on
              <code>_addOne</code>, the <code>$</code> is prepended to call the
              <code>$showNumber</code> function automatically as part of the
              naming convention.
            </p>
          </li>
          <li>
            Since our button has a <code>data-r</code> attribute with the
            <code>showNumber</code> value it goes through the function which
            call runs an <code>.innerHTML</code> update on it to change the
            value.
          </li>
        </ol>

        <p>
          With those steps completed, the button ends up with the new number
        </p>

        <h3>The <code>counter.js</code> File</h3>
        <p>
          [TKTKTK: this is a placeholder stub until the content has actually
          been written]
        </p>

        <h3>Even More Things</h3>
        <p>
          There are other features (e.g. initialing data, batch updates, using
          templates, etc...), but the core functionality comes down to those
          three attributes.
        </p>
      </details>

      <details>
        <summary>Basic Examples</summary>
[#
        [! for example in data.examples !]
        <div>
          <h3>[@ example.title @]</h3>
          <div class="make-two-columns">[@ example.raw_html @]</div>
          <div>
            <pre class="code-block"><code>
              [@- example.highlighted_html -@]
            </code></pre>
          </div>
        </div>
        [! endfor !] [@ data.reminder @]
#]
      </details>

      <details>
        <summary>Examples To Make</summary>

        <ul>
          <li>pass data to template via data-*</li>
          <li>3+ levels of nesting</li>
          <li>global send/receive</li>
          <li>Example using templates from the HTML</li>
          <li>
            Update values in data attrs and show other components picking up the
            changes.
          </li>
          <li>Change attrs and HTML of elements outside the component</li>
          <li>
            Explicit example of an element which has multiple
            <code>data-r</code> receivers
          </li>
          <li>
            Show example of event which calls a function with
            <code>data-c</code> but doesn't send a <code>data-s</code> event.
          </li>
        </ul>
      </details>

      <details>
        <summary>Color Picker Example</summary>
        [#
        <style>
          .color-picker {
            background-color: var(--color-picker-background);
            color: var(--color-picker-text);
          }
        </style>
        <div class="make-two-columns">
          [@ data.misc_html["color-picker.html"].raw @]
        </div>
        #]
      </details>

      <details>
        <summary>Status: Beta</summary>

        [@ data.reminder @]

        <p>
          I'm still working on the initial feature set. Everything you see in
          the examples below is working. More to come with the TODOs further
          below.
        </p>
        <p>
          I'll move views of the source code into the examples soon. For now,
          you'll need to peak at the .js files themselves to get and idea.
        </p>
        <p>
          Here's
          <a
            href="https://github.com/alanwsmith/bitty-js/blob/main/docs/bitty.js"
            >the bitty.js web component file</a
          >.
        </p>
        <p>
          Other files are in
          <a
            href="https://github.com/alanwsmith/bitty-js/tree/main/docs/examples"
            >the examples folder</a
          >.
        </p>
      </details>

      <details>
        <summary>Usage</summary>

        [@ data.reminder @]

        <p>
          I'll push to npm soon. Copy the .js file down and use it directly for
          now.
        </p>

        <ul class="accent-border-faded default-radius xlarge-block-padding">
          <li>
            Copy the
            <a
              href="https://raw.githubusercontent.com/alanwsmith/bitty-js/refs/heads/main/docs/bitty.js"
              >bitty.js component file</a
            >
            somewhere you can get to it without CORS issues.
          </li>
          <li>
            <p>
              Make a file called <code>example.js</code> and paste this into it:
            </p>
            <blockquote>
              <pre class="small-font">
export class Wires {
  #counter = 0;

  _increment(_) {
    this.#counter += 1;
  }

  $displayCount(el, _) {
    el.innerHTML = this.#counter;
  }
}
          </pre
              >
            </blockquote>
          </li>
          <li>
            <p>Add this to your web page:</p>
            <blockquote>
              <pre class="small-font">
&lt;bitty-js data-wires=&quot;./example.js&quot;&gt;
  &lt;button data-c=&quot;increment&quot; data-s=&quot;displayCount&quot;&gt;
    Click Me
  &lt;/button&gt;
  &lt;div data-r=&quot;displayCount&quot;&gt;No initial state&lt;/div&gt;
&lt;/bitty-js&gt;
            </pre
              >
            </blockquote>
            <p class="small-font">
              [Change the <code>data-wires</code> attribute to point to your
              <code>example.js</code> file as necessary]
            </p>
          </li>
          <li>
            <p>Call bitty one time on your page with:</p>
            <blockquote>
              &lt;script type="module" src="bitty.js"&gt;&lt;/script&gt;
            </blockquote>
            <p class="small-font">
              [Change the <code>src</code> path as necessary]
            </p>
          </li>
        </ul>
        <p>That's it.</p>
        <p>
          You should have your own working copy of
          <em>Storing State</em> example from below.
        </p>

        <h4>Quick Notes</h4>

        [@ data.reminder @]

        <p>I'm working on docs. For now, the important things to know are:</p>

        <ul>
          <li>
            <p>
              <code>data-c</code> attributes call functions. They map to
              functions in the <code>Wires</code> class that start with an
              underscore followed by the name from the attribute.
            </p>
            <p>
              For example: <code>data-c=&quot;increment&quot;</code> calls
              <code>_increment</code>.
            </p>
          </li>
          <li>
            <p>
              After the functions are run, the
              <code>data-s</code> and <code>data-r</code> attributes send and
              receive updates, respectively. The updates are handed via
              functions in the <code>Wires</code> class that start with a
              <code>$</code> followed by the same name.
            </p>
            <p>
              For example, <code>data-s=&quot;displayCount&quot;</code> and
              <code>data-r=&quot;displayCount&quot;</code> connect via the
              <code>$displayCount</code> function in the <code>Wires</code>
              class.
            </p>
          </li>
          <li>
            <p>
              The first argument passed to a <code>data-s</code>/<code
                >data-r</code
              >
              function (i.e. the ones that start with a <code>$</code>) is the
              element that's using it via a
              <code>data-r=&quot;FUNCTION_NAME&quot;</code>
              attribute.
            </p>
            <p>You can do all the standard stuff with the element.</p>
          </li>
        </ul>
        <p>
          That should get you started. Poke around the examples to see more
          until I get more docs up
        </p>
      </details>

      <details>
        <summary>Getting Updates</summary>

        [@ data.reminder @]

        <p>
          Checkout the scratch notes at the end of the page for things I'm
          working on and considering. Follow me on
          <a href="https://hachyderm.io/@TheIdOfAlan">mastodon</a>,
          <a href="https://bsky.app/profile/alanwsmith.com">bluesky</a>, or
          <a href="https://www.alanwsmith.com/feeds/posts.xml">my RSS feed</a>
          for updates. And, if you have feedback, please let me know!
        </p>
        <p>-a</p>
      </details>

      <details>
        <summary>Design Goals</summary>

        [@ data.reminder @]

        <p class="small-font">
          [NOTE: these are scratch notes. some of this will got to the features
          list below]
        </p>
        <ol>
          <li>[x] No build steps required</li>
          <li>[x] Single file usage</li>
          <li>[x] Minimal API. Minimal boilerplate.</li>
          <li>As simple as possible. As complex as necessary.</li>
          <li>
            [x] Default <code>data-s</code> is limited to a specific instances
            and its ancestors
          </li>
          <li>[] First class error reporting</li>
          <li>
            [x] Functionality defied by loading an arbitrary
            <code>Wires</code> class
          </li>
          <li>
            [x] Separation of concerts between function calls, sending signals,
            and receiving signals
          </li>
          <li>
            [x] Allow any standard manipulation of the receiving element (e.g.
            can change innerHTML, value, classes, etc.)
          </li>
          <li>[x] Use naming conventions for all core functionality</li>
          <li>[x] Style directly from the parent page</li>
          <li>
            [x] New elements participate in the function execution and signals
          </li>
          <li>[x] Rely on built-in functionality as much as possible</li>
          <li>
            [x] Event throttling through <code>.requestAnimationFrame</code>
          </li>
          <li>[x] Provide synchronous function calls</li>
          <li>[] Provide asynchronous function calls</li>
          <li>[] Provide asynchronous await function calls</li>
          <li>[] Provide asynchronous then function calls</li>
          <li>[x] Provide synchronous signals</li>
          <li>[] Provide asynchronous signals</li>
          <li>[] Provide asynchronous await signals</li>
          <li>[] Provide asynchronous then signals</li>
          <li>
            [x] Multiple instances work independently a single page by default
          </li>
          <li>
            [] Monitor elements outside the component for changes by attaching
            listeners to them via query selector
          </li>
          <li>
            Wires components can communicate with their parent
            <code>bitty-js</code> through a bridge (e.g. to run
            <code>.querySelector()</code> calls on the
            <code>bitty-js</code> element
          </li>
          <li>
            TODO: Multiple instances on the same page can cross communicate with
            and update each other
          </li>
          <li>
            TODO: Set instance specific style variables from inside the
            component
          </li>
          <li>
            Use values directly (i.e. don't have to call out to an external
            function to update a slider value you just changes)
          </li>
          <li>TODO: Components can be nested</li>
          <li>
            MAYBE: Child components can communicate with parent through bridge
          </li>
          <li>
            MAYBE: Parent components can communicate with children through
            bridge
          </li>
          <li>Intuitive data passing</li>
        </ol>
      </details>

      <details>
        <summary>Naming Convention</summary>
        <p>
          [This section is currently just a placeholder stub. Content will
          populate as progress continues]
        </p>
      </details>

      <details>
        <summary>Default and Custom Errors</summary>
        <p>[This section is a placeholder stub until draft content is ready]</p>
      </details>

      <details>
        <summary>Features</summary>

        [@ data.reminder @]

        <p class="warning-border-faded default-padding default-radius">
          This section is currently at the level of draft/scratch notes. Expect
          some duplication and possibly conflicting items.
        </p>

        <ul>
          <li>[] First class errors and debugging</li>
          <li>[] All reactive elements have unique IDs</li>
          <li>
            [] loadReactors is an event that bubbles so all ancestors can reload
          </li>
          <li>
            [] <code>data-ignore</code> on elements tells it to ignore specific
            signals
          </li>
          <li>
            [] <code>data-include</code> attr for elements. Only the signals
            named in it are reacted to. All others are ignored. TBD on
            interaction with <code>data-ignore</code>.
          </li>
          <li>
            [] An empty <code>data-include</code> in one way to turn off all
            reactions
          </li>
          <li>
            [] <code>data-inert</code> attr is an explicit way to turn off all
            reactions
          </li>
          <li>
            [] Each element is checked to make sure it's still set up to react
            to a given signal every time it receives one before the update
            occurs
          </li>
          <li>[] All reactive elements have unique ids</li>
          <li>
            [] Name-spaced signals (i.e. signals with the format
            <code>NAMESPACE:SIGNAL</code>) are broadcast globally
          </li>
          <li>
            [] Elements can receive name-spaced signals regardless of their
            relationship to the broadcaster
          </li>
          <li>[] Error CSS class added to elements where errors occur</li>
          <li>
            [] Built in debugger (TBD on specifics. Some stuff will happen
            automatically like a class being added to error elements. Thinking
            adding a watch for a <code>&debug</code> query param to add a close
            to show them is probably worth it)
          </li>
          <li>
            [] Rust level error message: It's a bug if an error message does
            give you enough information on how to fix it whatever caused it
          </li>
          <li>[] Load template from the return value of a method call</li>
          <li>[] Load template from a selector query on the parent page</li>
          <li>[] Can nest multiple layers with everything becoming reactive</li>
          <li>[] Improve error handling and messages</li>
          <li>[] Automatically load templates</li>
          <li>[x] Throttling done by <code>.requestAnimationFrame()</code></li>
          <li>[x] <code>data-call</code> to send functions for init</li>
          <li>[x] <code>data-b</code> to send batches</li>
          <li>
            [x] <code>data-batch</code> for the init version of batch send
          </li>
          <li>[x] Parents can ignore children signals</li>
          <li>[x] Parents can communicate with children through bridge</li>
          <li>[x] Children can communicate with parents through bridge</li>
          <li>[] Global senders</li>
          <li>[] Global receivers</li>
          <li>[] Query arbitrary instances for their data</li>
          <li>
            [x] Call <code>.init()</code> on <code>Wires</code> if available
          </li>
          <li>
            [x] bitty-js init happens after wires init so send signals can be
            sent to templates the wires loads
          </li>
          <li>
            [x] Loading a template automatically adds call/sender/receiver
            functionality to it
          </li>
          <li>[] Load other web components</li>
          <li>[] Loaded web components can use <code>bitty-js</code></li>
          <li>
            [x] Arbitrary <code>data-*</code> attributes can be used to send
            data to function calls.
          </li>
          <li>
            [] Send/receive functions can access data from the triggering event
          </li>
          <li>
            [x] Core bitty.js functionality comes in the stand alone component.
            Specific behavior is defined by making a JavaScript module with a
            <code>Wires</code> class in it.
          </li>
          <li>[x] Based off a naming convention to wire everything together</li>
          <li>[x] Multiple instances can be placed on a single page</li>
          <li>
            [x] The component uses the light DOM. Page level CSS can be applied
            to content inside the wires
          </li>
          <li>
            [x] Initialize data with <code>data-send</code> which does a send
            before the listeners are added
          </li>
          <li>
            [x]: The <code>data-call</code> runs functions before doing the send
            events in <code>data-send</code>
          </li>
          <li>
            [x] Defaults to listening for <code>click</code> and
            <code>input</code> events.
          </li>
          <li>
            [x] Customize the event listeners with
            <code>data-listeners</code> in the <code>bitty-js</code> component
            tag
          </li>
          <li>
            [x] CSS style variables/properties can be updated at the page/root
            level
          </li>
          <li>
            [x] CSS style variables/properties can be updated scoped to the
            individual <code>bitty-js</code> element instance
          </li>
          <li>[x] Classes can be updated</li>
          <li>[x] .innerHTML can be updated</li>
          <li>[x] .values can be updated</li>
          <li>[] datasets can be updated</li>
          <li>[] aria labels can be updated</li>
          <li>
            [x] Can use <code>data-batch</code> and <code>data-b</code> for
            sending batches of signals
          </li>
          <li>
            [x] The data-send attribute on the main component tag sends those
            signals at the start.
          </li>
          <li>
            [] Errors are thrown if the requested wires import doesn't exist or
            doesn't load
          </li>
          <li>
            [] Preflight check to make sure functions exist and provide warnings
            if they don't
          </li>
          <li>
            [] Stress test with increasing numbers of instances and updates
          </li>
          <li>
            [] Send signals from internal functions in the wires? (e.g. a type
            of redirect)
          </li>
          <li>
            [] Defined, ID based error messages. Each message contains a
            description and, ideally help text
          </li>
          <li>
            [] Documentation on adding custom errors from the tool classes
            (thinking they'll start with 9000 so they can be integers but be
            safe from collisions)
          </li>
          <li>
            [] Example of using <code>data-widget</code> to call something other
            than the default <code>Widget()</code> class.
          </li>
        </ul>
      </details>

      <details>
        <summary>Out-Of-Scope</summary>
        <p>
          These items are not in scope for <code>bitty.js</code>. They are the
          responsibility of <code>Wires</code> classes:
        </p>
        <ul>
          <li>
            OUT-OF-SCOPE: Preventing DOM updates if an event sends the same
            value that's already set for an output
          </li>
          <li>OUT-OF-SCOPE: Preventing infinite nesting attempts</li>
          <li>OUT-OF-SCOPE: Routing between pages</li>
          <li>
            OUT-OF-SCOPE: Advanced throttling beyond
            <code>.requestAnimationFrame</code>
          </li>
          <li>OUT-OF-SCOPE: Debouncing events</li>
          <li>OUT-OF-SCOPE: Data storage</li>
          <li>OUT-OF-SCOPE: JSX</li>
        </ul>
      </details>

      <details>
        <summary>Known Bugs</summary>

        [@ data.reminder @]
        <p>
          This is largely a placeholder. Things will be added as features become
          stable
        </p>

        <ul>
          <li>
            Code blocks in light mode are hard to read. (styles are currently
            hard coded. they need to be moved to classes so the can switch
            between accessible colors for both light and dark mode)
          </li>
        </ul>
      </details>

      <details>
        <summary>Queue</summary>

        [@ data.reminder @]

        <ul>
          <li>
            TODO: Move to classes for syntax highlighting so code snippets have
            good contrast in both light and dark modes
          </li>
          <li>TODO: Refactored color picker to multiple components</li>
          <li>
            TODO: Custom error messages can be added from individual
            tools/modules/whatever they end up being called
          </li>
          <li>
            TODO: Moved examples into individual file sets to output code
            samples along with the examples themselves.
          </li>
        </ul>
      </details>

      <details>
        <summary>Release Notes</summary>

        [@ data.reminder @]

        <ul>
          <li>
            <h3>Version: 0.2.3</h3>
            <p>TBD</p>

            [@ data.reminder @]

            <ul>
              <li>
                REMINDER: Bump version number in bitty.js file and set date here
              </li>
              <li>
                Moved UUID generation for the <code>bitty-js</code> and all
                <code>data-*</code> reactive elements to the first thing in
                <code>connectedCallback()</code> to aid in error messaging.
              </li>
              <li>
                Created an <code>#errors</code> private var to store error
                messages and help by ID.
              </li>
              <li>
                <p>
                  Added <code>this.error()</code> for outputting errors. It
                  takes two optional arguments: an ID and an Element. The ID
                  maps to the IDs in <code>#errors</code>. They're used to add
                  detail and help message to the error output.
                </p>
                <p>
                  The ID defaults to <code>0</code> which is an unclassified
                  error type. The message for that ID includes a note to the
                  developer to use an ID to classify the error. I consider it a
                  bug if an appropriate ID doesn't exist and request an issue be
                  open to fix it.
                </p>
                <p>
                  The <code>this.error()</code> method dumps the
                  <code>bitty-js</code> elemnet after the message.
                </p>
                <p>
                  If an element was passed to <code>this.error()</code> it's
                  dumped out as well.
                </p>
                <p>
                  The error message end up being pretty long. The end up adding
                  a bunch of lines to the source file. That's an explicit
                  decision aimed at making bitty easier to work with.
                </p>
              </li>
              <li>
                <code>this.error()</code> takes two optional arguments: an ID
                and an Element. The ID is used to map to the errors in
                <code>#errors</code>
              </li>
              <li>
                Added top level <code>debug</code> function that uses a
                <code>debug</code> search query param from the
                <code>window.location</code> to see if it should output
              </li>
              <li>
                The <code>debug</code> function takes an optional element. It
                dumps it to the console if one comes in
              </li>
              <li>
                Renamed <code>data-wires</code> to <code>data-bridge</code>.
                Fits better and maps nicer to the <code>.bridge</code> coming
                back in from the support class.
              </li>
              <li>
                Added a <code>data-widget</code> attribute to the
                <code>bitty-js</code> elements to allow using multiple classes
                from inside a single supporting .js module file
              </li>
              <li>
                Defaults to calling <code>new Widget()</code> automatically if a
                <code>data-widget</code> is not defined.
              </li>
            </ul>
          </li>

          <li>
            <h3>Version: 0.2.2</h3>
            <p>June 4, 2025</p>

            [@ data.reminder @]

            <ul>
              <li>
                <p>
                  Added uuids as <code>data-uuid</code> attrs to all elements
                  with related <code>data-*</code> attributes. Added them to the
                  <code>bitty-js</code> elements too. I was originally thinking
                  I'd add the UUIDs on the elements internally (i.e.
                  <code>el.uuid</code> instead of <code>el.dataset.uuid</code>).
                </p>
                <p>
                  I decided on the attribute approach because it offers two
                  benefits: 1. You can see the IDs in the Element tree view of
                  developer consoles, and 2. You can address them with CSS to
                  update styles based on the UUID. Both of those thing will go
                  to supporting better error messages and bug hunting.
                </p>
              </li>
              <li>
                Mostly content updates largely focused on detailing the opening
                counter example.
              </li>
              <li>Added CONTRIBUTING file.</li>
              <li>Added watcher script to build site when files change.</li>
              <li>
                Refined the initial counter example to remove the text and
                change the private variable to <code>this.num</code> to make the
                examples look nicer.
              </li>
              <li>
                Moved the Examples section directly below the initial basic
                functionality overview section.
              </li>
              <li>
                Added reminders all over the place to edit the template and
                instead of the output for HTML page (which would be overwritten.
                ask me how I know).
              </li>
              <li>
                Started adding <code>prettier-ignore</code> comments to code
                snippets to prevent the display output from being mangled.
              </li>
              <li>
                Started stripping <code>prettier-ignore</code> comments from the
                HTML output so it doesn't show in the example
              </li>
              <li>
                Same goes for <code>// deno-fmt-ignore-file</code> in .js files
              </li>
              <li>
                Added script to maintain the open open/closed states of the
                section details elements across page loads. (Having them close
                every time I made a change was maddening)
              </li>
              <li>
                Moved all the example <code>.js</code> files into the site root.
                Not a fan of that in general, but it makes the examples look
                better since the path is shorter.
              </li>
            </ul>
          </li>

          <li>
            <h3>Version: 0.2.1</h3>

            <p>June 3, 2025</p>

            [@ data.reminder @]

            <ul>
              <li>
                Made a Hello, World example that shows basic features. (Compared
                to the single button press from the prior first example.)
              </li>
              <li>Showing Hello, World code as part of the example.</li>
              <li>Load templates automatically.</li>
              <li>Throttling via <code>.requestAnimationFrame()</code>.</li>
              <li>
                Renamed <code>data-f</code> to <code>data-c</code> (i.e.
                &quot;call&quot;) for clarity.
              </li>
              <li>
                Renamed <code>data-prep</code> attribute on
                <code>bitty-js</code> tag to <code>data-call</code> (i.e.
                &quot;call&quot;) for clarity.
              </li>
              <li>
                Renamed <code>data-init</code> attribute on
                <code>bitty-js</code> tag to <code>data-send</code> so it
                matches <code>data-s</code> more closely.
              </li>
              <li>Made basic site builder for landing page.</li>
              <li>
                Moved everything into <code>details</code> elements for the
                landing page.
              </li>
            </ul>
          </li>

          <li>
            <h3>Version: 0.2.0</h3>
            <p>June 3, 2025</p>

            [@ data.reminder @]

            <ul>
              <li>
                Rewrite to provide direct access to receiving elements. They are
                fully accessible in the send/receive functions. (As compared to
                the 0.1.0 approach which required explicitly defining what would
                happen via an update (e.g. update <code>.innerHTML</code> or
                <code>.value</code>).
              </li>
              <li>
                Renamed <code>data-wrapper</code> and the target
                <code>Wrapper</code> class to <code>data-wires</code> and
                <code>Wires</code>. (<code>bitty.js</code> is the wrapper. The
                <code>Wires</code> class is how things are hooked up.).
              </li>
              <li>
                Added <code>data-call</code> attribute parsing to
                <code>bitty-js</code> tag. It runs functions like
                <code>data-c</code> but does so prior to adding the event
                listeners to the element.
              </li>
              <li>
                Added <code>data-batch</code> attribute processing to
                <code>bitty-js</code> tags. It operates like
                <code>data-b</code> but fires before event listeners are added.
              </li>
              <li>
                Added <code>data-ignore</code> attribute to allow components to
                avoid calls to the named functions. (Send signals bubble up to
                parents of nested components by default. This provides a way to
                ignore them).
              </li>
              <li>
                The <code>bitty-js</code> element looks for an
                <code>.init()</code> method in the <code>Wires</code> class. If
                it finds one it calls it during the initialization process.
              </li>
              <li>
                Passing both the element and the triggering event to the
                send/receive functions.
              </li>
              <li>
                Moved to using <code>data-b</code> explicitly to separate block
                calls from individual function calls.
              </li>
              <li>
                Order of operations is: function calls, batch calls, single send
                calls.
              </li>
              <li>
                Temporarily removed preflight check until global functionality
                is defined.
              </li>
              <li>
                Created example of loading a template via the
                <code>.init()</code> call back to the <code>Wires</code> class.
              </li>
              <li>Created example with nested components.</li>
              <li>
                Created example with parent of child components pulling data
                from the children to do a calculation.
              </li>
              <li>
                Created example showing parent ignoring send signals from
                children.
              </li>
              <li>
                Created example showing on components loading a child component
                via a template that becomes fully reactive.
              </li>
            </ul>
          </li>

          <li>
            <h3>Version: 0.1.0</h3>
            <p>June 2, 2025</p>

            [@ data.reminder @]

            <ul>
              <li>Initial prototype.</li>
              <li>
                <code>&ltbitty-js&gt;</code> wraps elements to provide them with
                reactive capabilities.
              </li>
              <li>
                Basic <code>data-c</code>, <code>data-s</code>, and
                <code>data-r</code>
                in place to call functions, send, and receive updates,
                respectively.
              </li>
              <li>
                Functionality is loaded using <code>data-wrapper</code> to point
                to a module to load. The module must export a
                <code>Wrapper</code> class that gets loaded and used to provide
                functions and send/receive callbacks.
              </li>
              <li>
                Uses string prefixes to make determinations about how to handle
                data through the send/receive channels (e.g.
                <code>htmlSOMETHING</code>
                updates <code>.innerHTML</code> of an element while
                <code>valueSOMETHING</code> updates the <code>.value</code>).
              </li>
              <li>
                Defined convention for functions. <code>data-c</code> maps to
                functions in the <code>Wrapper</code> class that start with a
                <code>_</code> (underscore). The <code>data-s</code> and
                <code>data-r</code> attributes map to functions in the
                <code>Wrapper</code> class that start with a
                <code>$</code> (dollar sign).
              </li>
              <li>
                Decided against using <code>data-c data-s and data-r</code> on
                the <code>bitty.js</code> tags. That would involved a lot of
                extra overhead in parsing to differentiate between the top level
                element and the content it wraps. Using
                <code>data-send</code> instead as a replacement for
                <code>data-c</code>. Others, TBD.
              </li>
              <li>
                Set up <code>data-c="batchSOMETHIGN"</code> functionality to
                send a single single that gets turned into multiple signals in
                the <code>Wrapper</code>.
              </li>
              <li>
                Defined convention of using <code>.batches</code> to look for
                batches. It must be a hash where the keys match the incoming
                request and the value is an array of functions to run.
              </li>
              <li>
                Defined <code>.bridge</code> to allow
                <code>Wrapper</code> functions to access the parent
                <code>bitty-js</code> element.
              </li>
              <li>
                Scoped event listeners to the <code>bitty-js</code> elements.
              </li>
              <li>
                Set up <code>data-listeners</code> attribute on
                <code>bitty-js</code> tags to override the default listeners
                (which are <code>input</code> and <code>click</code>).
              </li>
              <li>Created example that stores its own state.</li>
              <li>
                Created example that updates an element with the same content it
                sent (i.e. verified feedback can be avoided).
              </li>
              <li>
                Created example using <code>data-send</code> to load initial
                values.
              </li>
              <li>Created example that sends multiple signals.</li>
              <li>
                Created example with multiple elements receiving the same
                signal.
              </li>
              <li>
                Created example showing how to update global CSS
                variables/properties.
              </li>
              <li>Created example showing custom event listeners.</li>
              <li>
                Created example showing how to update CSS variables/properties
                scoped to the content of individual <code>bitty-js</code> tags.
              </li>
              <li>
                Examples use parent page's CSS for styling. It confirms I'm
                happy with the choice to use the light DOM instead of the shadow
                DOM.
              </li>
              <li>
                Set up initial preflight check to ensure functions are in place.
              </li>
            </ul>
          </li>
        </ul>
      </details>
    </main>

    <footer
      class="default-wrapper align-center large-top-padding accent-top-border-faded2"
    >
      made by <a href="https://www.alanwsmith.com/">alan w smith</a>
      <br />
      <a href="https://links.alanwsmith.com">other projects</a> ~
      <a href="https://github.com/alanwsmith/bitty-js">source</a> ~
      <a href="https://socials.alanwsmith.com">socials</a>
    </footer>

    [@ data.reminder @]

    <script type="module" src="bitty.js"></script>
    <script type="module" src="components/github-stars-beta-1.js"></script>
    <script type="module">
      class DetailsWatcher {
        #storageName = 'openDetailsData'
        #data

        initTags() {
          this.details().forEach((tag, tagIndex) => {
            if (this.#data.has(tagIndex)) {
              tag.open = true
            }
            tag.addEventListener('toggle', (event) => {
              if (event.newState === 'open') {
                this.#data.add(tagIndex)
              } else {
                this.#data.delete(tagIndex)
              }
              this.saveState()
            })
          })
        }

        details() {
          return document.querySelectorAll('details')
        }

        loadState() {
          const storage = localStorage.getItem(this.#storageName)
          if (storage === null) {
            this.#data = new Set()
          } else {
            this.#data = new Set(JSON.parse(storage).data)
          }
        }

        run() {
          this.loadState()
          this.initTags()
        }

        saveState() {
          localStorage.setItem(
            this.#storageName,
            JSON.stringify({ data: [...this.#data] })
          )
        }
      }
      const dw = new DetailsWatcher()
      dw.run()
    </script>
  </body>
</html>
