<!DOCTYPE html>
<html lang="en">
  <head>
<style>
:root {
  --load-hider: 0;
}

:root {
  --light--background-color: oklch(0.9634 0.02097 105.642);
  --light--default-color: oklch(0.1951 0.23 105.642);
  --dark--background-color: oklch(0.2124 0.0298 254.092);
  --dark--default-color: oklch(0.8747 0.04454 254.092);
  --hc-light--background-color: oklch(1 0.06752 259.652);
  --hc-light--default-color: oklch(0.0995 0.23 259.652);
  --hc-dark--background-color: oklch(0 0.20706934229967444 142);
  --hc-dark--default-color: oklch(1 0.20411 82);
}

:root {
  --background-color: var(--switch--background-color, var(--light--background-color));
  --default-color: var(--switch--default-color, var(--light--default-color));
}

@media (prefers-color-scheme: dark) {
  :root {
    --background-color: var(--switch--background-color, var(--dark--background-color));
    --default-color: var(--switch--default-color, var(--dark--default-color));
  }
}</style>

<script>
function loadThemeProps() {
  const data = localStorage.getItem("themeProps");
  if (data) {
    data.props.forEach((prop) => {
    });
  }
}
loadThemeProps();</script><style>
html {
  background-color: var(--background-color);
  color: var(--default-color);
}

body {
  background-color: var(--background-color);
  color: var(--default-color);
  opacity: var(--load-hider);
}
</style>
    <link rel="stylesheet" href="/styles/7/0/0//all-colors.css" />
    <script src="/scripts/style-loader.js"></script>
    <script src="https://unpkg.com/@alanwsmith/bitty@7.0.0/bitty-7.0.0.js" type="module"></script>
    <link rel="stylesheet" href="/styles/7/0/0//custom.css" />

<script>
window.BittyUnhide = class {
  bittyReady() {
    this.api.setProp("--load-hider", 1);
  }
}
</script><meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>bitty - a web tool for interesting pages</title>
<meta property="og:title" content="bitty - a web tool for interesting pages" />
<link rel="shortcut icon" href="/favicon.ico" />
<meta name="description" content="bitty is a web component that wraps other HTML elements to make them interactive." />
<meta property="og:description" content="bitty is a web component that wraps other HTML elements to make them interactive." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://bitty.alanwsmith.com/" />
<meta property="og:image" content="https:&#x2f;&#x2f;bitty.alanwsmith.com&#x2f;images&#x2f;og-image-5.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png" />
<link rel="manifest" href="/images/favicons/site.webmanifest" />
<link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5" />  </head>
  <body>
<noscript>
  <p>
    Bitty is a web component that requires JavaScript
    which is not available on this page. You'll need
    to switch to a browser that has it enabled
    to check things out. 
  </p>
  <style>
  :root { --load-hider: 1; }
  </style>
</noscript><script>
const t = {
  stars: `<github-stars
  :repo="alanwsmith/bitty"
  :text-color="var(--accent-color)"
  :background-color="var(--faded-match-color)"
></github-stars>`,
};

window.GitHubStars = class {
  bittyInit() {
    const url = new URL(window.location.href);
    if (url.hostname !== "localhost") {
      this.api.appendChild(this.api.makeElement(t.stars));
    }
  }
}
</script>

<nav class="default-wrapper">
  <a href="/">bitty</a>

  <a href="/unit-tests/7/0/0/">tests</a>

  <a href="/documentation/7/0/0/">documentation</a>

  <bitty-7-0 data-connect="GitHubStars"></bitty-7-0>
</nav><bitty-7-0 data-connect="/versions&#x2f;7&#x2f;0&#x2f;0/modules/example-wrapper.js">
<bitty-7-0 data-connect="/versions&#x2f;7&#x2f;0&#x2f;0/modules/make-code-blocks.js">

<style>
[data-connect="GetWeather"] {
  height: 12rem;
}</style>

<script>
const weatherTemplates = {
  selector: `<select data-send="changeStation"></select>`,

  stationOption: `<option value="URL">CODE - STATE (CITY)</option>`,

  report: `<div>
<div>DESC<br />TEMPF째F (TEMPC째C)</div>
<div>IMG</div>
</div>`,
};

function c2f(c) {
  return Math.round((c * 9 / 5) + 32);
}

window.GetWeather = class {
  #stations = null;

  async bittyInit() {
    const url = `/versions/7/0/0/data/weather-stations.json`;
    const response = await this.api.getJSON(url);
    if (response.value) {
      this.#stations = response.value;
      this.api.trigger("changeStation");
    }
  }

  async changeStation(ev, el) {
    el.innerHTML = "...";
    const station = ev.value === undefined ? "PAJN" : ev.value;
    const url =
      `https://api.weather.gov/stations/${station}/observations/latest`;
    const response = await this.api.getJSON(url);
    if (response.value) {
      const data = response.value.properties;
      const tmpC = data.temperature.value;
      const tmpF = c2f(tmpC);
      const subs = [
        ["TEMPC", tmpC],
        ["TEMPF", tmpF],
        ["DESC", data.textDescription],
      ];
      if (data.icon) {
        subs.push(["IMG", `<img src="${data.icon}" alt="weather icon" />`]);
      } else {
        subs.push(["IMG", "(no image available)"]);
      }
      const output = this.api.makeHTML(weatherTemplates.report, subs);
      el.replaceChildren(output);
    } else {
      el.innerHTML = "Could not get feed";
    }
  }

  weatherStations(_, el) {
    const selector = this.api.makeElement(weatherTemplates.selector);
    Object.entries(this.#stations.capitals).forEach(([code, station]) => {
      const subs = [
        ["CITY", station.city_name],
        ["STATE", station.state_name],
        ["URL", station.weather_station_id],
        ["CODE", code],
      ];
      const option = this.api.makeElement(weatherTemplates.stationOption, subs);
      selector.appendChild(option);
    });
    el.appendChild(selector);
  }
};</script>

<div class="hp-example">
  <div class="hp-example-wrapper">
    <div class="hp-example-title">
Get Weather    </div>
    <div class="hp-example-content"><bitty-7-0 
  data-listeners="input" 
  data-connect="GetWeather"
>
  <div data-init="weatherStations"></div>
  <div data-receive="changeStation"></div>
</bitty-7-0>

    </div>
  </div>
</div>

<h2>HTML</h2><pre class="code-block"><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag custom html">bitty-7-0</span> 
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">data-listeners</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>input<span class="punctuation definition string end html">&quot;</span></span></span> 
<span class="line-marker"></span>  <span class="meta attribute-with-value html"><span class="entity other attribute-name html">data-connect</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>GetWeather<span class="punctuation definition string end html">&quot;</span></span></span>
<span class="line-marker"></span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span>  <span class="meta tag block any html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag block any html">div</span> <span class="meta attribute-with-value html"><span class="entity other attribute-name html">data-init</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>weatherStations<span class="punctuation definition string end html">&quot;</span></span></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag block any html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag block any html">div</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span>  <span class="meta tag block any html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag block any html">div</span> <span class="meta attribute-with-value html"><span class="entity other attribute-name html">data-receive</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>changeStation<span class="punctuation definition string end html">&quot;</span></span></span><span class="punctuation definition tag end html">&gt;</span></span><span class="meta tag block any html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag block any html">div</span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span><span class="meta tag custom html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag custom html">bitty-7-0</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
<h2>JavaScript</h2><pre class="code-block"><code><span class="line-marker"></span><span class="source js"><span class="storage type js">const</span> <span class="variable other readwrite js">weatherTemplates</span> <span class="keyword operator assignment js">=</span> <span class="meta object-literal js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>  <span class="meta object-literal key js">selector</span><span class="punctuation separator key-value js">:</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>&lt;select data-send=&quot;changeStation&quot;&gt;&lt;/select&gt;<span class="punctuation definition string template end js">`</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta object-literal key js">stationOption</span><span class="punctuation separator key-value js">:</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>&lt;option value=&quot;URL&quot;&gt;CODE - STATE (CITY)&lt;/option&gt;<span class="punctuation definition string template end js">`</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta object-literal key js">report</span><span class="punctuation separator key-value js">:</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>&lt;div&gt;
<span class="line-marker"></span>&lt;div&gt;DESC&lt;br /&gt;TEMPF째F (TEMPC째C)&lt;/div&gt;
<span class="line-marker"></span>&lt;div&gt;IMG&lt;/div&gt;
<span class="line-marker"></span>&lt;/div&gt;<span class="punctuation definition string template end js">`</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span><span class="punctuation section block js">}</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="meta function declaration js"><span class="storage type function js">function</span> <span class="entity name function js">c2f</span><span class="punctuation section group begin js">(</span><span class="variable parameter function js">c</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>  <span class="keyword control flow js">return</span> <span class="support class builtin js">Math</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">round</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">c</span> <span class="keyword operator arithmetic js">*</span> <span class="constant numeric js">9</span> <span class="keyword operator arithmetic js">/</span> <span class="constant numeric js">5</span><span class="punctuation section group js">)</span></span> <span class="keyword operator arithmetic js">+</span> <span class="constant numeric js">32</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span><span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="support type object dom js">window</span><span class="punctuation accessor js">.</span><span class="meta property object js">GetWeather</span> <span class="keyword operator assignment js">=</span> <span class="meta class js"><span class="storage type class js">class</span> <span class="meta class js"><span class="meta block js"><span class="punctuation section block js">{</span></span></span></span><span class="meta class js"><span class="meta block js">
<span class="line-marker"></span>  #stations = null;
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">async</span><span class="meta function declaration js"> </span></span><span class="meta function declaration js"><span class="entity name function js">bittyInit</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="support module node js">url</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>/versions/7/0/0/data/weather-stations.json<span class="punctuation definition string template end js">`</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">response</span> <span class="keyword operator assignment js">=</span> <span class="variable other readwrite js">await</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">api</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">getJSON</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="support module node js">url</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">response</span><span class="punctuation accessor js">.</span><span class="meta property object js">value</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other readwrite js">stations</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">response</span><span class="punctuation accessor js">.</span><span class="meta property object js">value</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">api</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">trigger</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>changeStation<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">async</span><span class="meta function declaration js"> </span></span><span class="meta function declaration js"><span class="entity name function js">changeStation</span><span class="punctuation section group begin js">(</span><span class="variable parameter function js">ev</span><span class="punctuation separator parameter function js">,</span> <span class="variable parameter function js">el</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable other object js">el</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>...<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">station</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">ev</span><span class="punctuation accessor js">.</span><span class="meta property object js">value</span> <span class="keyword operator comparison js">===</span> <span class="constant language undefined js">undefined</span> <span class="keyword operator ternary js">?</span> <span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>PAJN<span class="punctuation definition string end js">&quot;</span></span> <span class="keyword operator ternary js">:</span> <span class="variable other object js">ev</span><span class="punctuation accessor js">.</span><span class="meta property object js">value</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="support module node js">url</span> <span class="keyword operator assignment js">=</span>
<span class="line-marker"></span>      <span class="string template js"><span class="punctuation definition string template begin js">`</span>https://api.weather.gov/stations/</span><span class="meta template expression js"><span class="punctuation definition template-expression begin js">${</span></span><span class="meta template expression js"><span class="source js embedded expression"><span class="variable other readwrite js">station</span></span><span class="punctuation definition template-expression end js">}</span></span><span class="string template js">/observations/latest<span class="punctuation definition string template end js">`</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">response</span> <span class="keyword operator assignment js">=</span> <span class="variable other readwrite js">await</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">api</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">getJSON</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="support module node js">url</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">response</span><span class="punctuation accessor js">.</span><span class="meta property object js">value</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="storage type js">const</span> <span class="variable other readwrite js">data</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">response</span><span class="punctuation accessor js">.</span><span class="meta property object js">value</span><span class="punctuation accessor js">.</span><span class="meta property object js">properties</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="storage type js">const</span> <span class="variable other readwrite js">tmpC</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">data</span><span class="punctuation accessor js">.</span><span class="meta property object js">temperature</span><span class="punctuation accessor js">.</span><span class="meta property object js">value</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="storage type js">const</span> <span class="variable other readwrite js">tmpF</span> <span class="keyword operator assignment js">=</span> <span class="meta function-call js"><span class="variable function js">c2f</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">tmpC</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="storage type js">const</span> <span class="variable other readwrite js">subs</span> <span class="keyword operator assignment js">=</span> <span class="meta sequence js"><span class="punctuation section brackets js">[</span>
<span class="line-marker"></span>        <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>TEMPC<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">tmpC</span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>        <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>TEMPF<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">tmpF</span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>        <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>DESC<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other object js">data</span><span class="punctuation accessor js">.</span><span class="meta property object js">textDescription</span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>      <span class="punctuation section brackets js">]</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">data</span><span class="punctuation accessor js">.</span><span class="meta property object js">icon</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable other object js">subs</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function mutator js">push</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>IMG<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>&lt;img src=&quot;</span><span class="meta template expression js"><span class="punctuation definition template-expression begin js">${</span></span><span class="meta template expression js"><span class="source js embedded expression"><span class="variable other object js">data</span><span class="punctuation accessor js">.</span><span class="meta property object js">icon</span></span><span class="punctuation definition template-expression end js">}</span></span><span class="string template js">&quot; alt=&quot;weather icon&quot; /&gt;<span class="punctuation definition string template end js">`</span></span><span class="punctuation section brackets js">]</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span> <span class="meta conditional js"><span class="keyword control conditional js">else</span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable other object js">subs</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function mutator js">push</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>IMG<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>(no image available)<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation section brackets js">]</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>      <span class="storage type js">const</span> <span class="variable other readwrite js">output</span> <span class="keyword operator assignment js">=</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">api</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">makeHTML</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">weatherTemplates</span><span class="punctuation accessor js">.</span><span class="meta property object js">report</span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">subs</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="variable other object js">el</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">replaceChildren</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">output</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span> <span class="meta conditional js"><span class="keyword control conditional js">else</span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="variable other object js">el</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>Could not get feed<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function declaration js"><span class="entity name function js">weatherStations</span><span class="punctuation section group begin js">(</span><span class="variable parameter function js">_</span><span class="punctuation separator parameter function js">,</span> <span class="variable parameter function js">el</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">selector</span> <span class="keyword operator assignment js">=</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">api</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">makeElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">weatherTemplates</span><span class="punctuation accessor js">.</span><span class="meta property object js">selector</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="support class builtin js">Object</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">entries</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other object js">stations</span><span class="punctuation accessor js">.</span><span class="meta property object js">capitals</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">forEach</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta function declaration js"><span class="punctuation section group begin js">(</span>[<span class="variable parameter function js">code</span><span class="punctuation separator parameter function js">,</span> <span class="variable parameter function js">station</span>]<span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="storage type js">const</span> <span class="variable other readwrite js">subs</span> <span class="keyword operator assignment js">=</span> <span class="meta sequence js"><span class="punctuation section brackets js">[</span>
<span class="line-marker"></span>        <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>CITY<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other object js">station</span><span class="punctuation accessor js">.</span><span class="meta property object js">city_name</span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>        <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>STATE<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other object js">station</span><span class="punctuation accessor js">.</span><span class="meta property object js">state_name</span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>        <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>URL<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other object js">station</span><span class="punctuation accessor js">.</span><span class="meta property object js">weather_station_id</span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>        <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>CODE<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">code</span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>      <span class="punctuation section brackets js">]</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="storage type js">const</span> <span class="variable other readwrite js">option</span> <span class="keyword operator assignment js">=</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta property object js">api</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">makeElement</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">weatherTemplates</span><span class="punctuation accessor js">.</span><span class="meta property object js">stationOption</span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">subs</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="variable other object js">selector</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">appendChild</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">option</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="variable other object js">el</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">appendChild</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">selector</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span><span class="punctuation section block js">}</span></span></span><span class="punctuation terminator statement js">;</span></span></code></pre>

<h2>Notes</h2>
<ul>
<li>
<p>This gets JSON data dynamically from both the
local stations list and the weather.gov API.</p>
</li>
<li>
<p>Shows using <code>data-listeners</code> to set to
just use the <code>input</code> event type.</p>
</li>
</ul>

</bitty-7-0>
</bitty-7-0><script>
  setTimeout(() => { 
    document.documentElement.style.setProperty("--load-hider", "1");
  }, 1600);
</script>

<footer class="small-wrapper xsmall-flow xxxlarge-top-margin faded-accent-top-border small-font-size large-bottom-margin large-block-padding">
  <div class="text-align-center">
    <a href="https://github.com/alanwsmith/bitty">source</a> ~
    <a href="https://socials.alanwsmith.com/">socials</a> ~
    <a href="https://www.alanwsmith.com/feeds/posts.xml">rss</a> ~
    <a href="https://links.alanwsmith.com/">other projects</a>
  </div>
  <div class="text-align-center">
    <a href="https://bitty.alanwsmith.com/">bitty</a> by <a href="https://www.alanwsmith.com/">alan w smith</a> is marked <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a>
  </div>
  <details class="text-align-center"><summary>This work has been dedicated to the public domain.</summary>
    <div>By marking the work with a CC0 public domain dedication, the creator is giving up their copyright and allowing reusers to distribute, remix, adapt, and build upon the material in any medium or format, even for commercial purposes.</div>
  </details>
</footer>
    <script src="/components/github-stars-beta-1.js" type="module"></script>


  </body>
</html>
