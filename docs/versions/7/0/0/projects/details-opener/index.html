<!DOCTYPE html>
<html lang="en">
  <head>
<style>
:root {
  --load-hider: 0;
}

:root {
  --light--background-color: oklch(0.9634 0.02097 105.642);
  --light--default-color: oklch(0.1951 0.23 105.642);
  --dark--background-color: oklch(0.2124 0.0298 254.092);
  --dark--default-color: oklch(0.8747 0.04454 254.092);
  --hc-light--background-color: oklch(1 0.06752 259.652);
  --hc-light--default-color: oklch(0.0995 0.23 259.652);
  --hc-dark--background-color: oklch(0 0.20706934229967444 142);
  --hc-dark--default-color: oklch(1 0.20411 82);
}

:root {
  --background-color: var(--switch--background-color, var(--light--background-color));
  --default-color: var(--switch--default-color, var(--light--default-color));
}

@media (prefers-color-scheme: dark) {
  :root {
    --background-color: var(--switch--background-color, var(--dark--background-color));
    --default-color: var(--switch--default-color, var(--dark--default-color));
  }
}</style>

<script>
function loadThemeProps() {
  const data = localStorage.getItem("themeProps");
  if (data) {
    data.props.forEach((prop) => {
    });
  }
}
loadThemeProps();</script><style>
html {
  background-color: var(--background-color);
  color: var(--default-color);
}

body {
  background-color: var(--background-color);
  color: var(--default-color);
  opacity: var(--load-hider);
}
</style>
    <link rel="stylesheet" href="/styles/7/0/0//all-colors.css" />
    <script src="/scripts/style-loader.js"></script>
    <script src="https://unpkg.com/@alanwsmith/bitty@7.0.0/bitty-7.0.0.js" type="module"></script>
    <link rel="stylesheet" href="/styles/7/0/0//custom.css" />

<script>
window.BittyUnhide = class {
  bittyReady() {
    this.api.setProp("--load-hider", 1);
  }
}
</script><meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>bitty - a web tool for interesting pages</title>
<meta property="og:title" content="bitty - a web tool for interesting pages" />
<link rel="shortcut icon" href="/favicon.ico" />
<meta name="description" content="bitty is a web component that wraps other HTML elements to make them interactive." />
<meta property="og:description" content="bitty is a web component that wraps other HTML elements to make them interactive." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://bitty.alanwsmith.com/" />
<meta property="og:image" content="https:&#x2f;&#x2f;bitty.alanwsmith.com&#x2f;images&#x2f;og-image-5.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png" />
<link rel="manifest" href="/images/favicons/site.webmanifest" />
<link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5" />  </head>
  <body>
<noscript>
  <p>
    Bitty is a web component that requires JavaScript
    which is not available on this page. You'll need
    to switch to a browser that has it enabled
    to check things out. 
  </p>
  <style>
  :root { --load-hider: 1; }
  </style>
</noscript><bitty-7-0 data-connect="/versions/7/0/0/projects/code-block-controls/script.js CodeBlockControls">
<bitty-7-0 data-connect="/versions/7/0/0/projects/details-opener/script.js DetailsOpener">
<bitty-7-0 data-connect="/versions/7/0/0/projects/unhider/script.js Unhider">
<script>
const t = {
  stars: `<github-stars
  :repo="alanwsmith/bitty"
  :text-color="var(--heading-color)"
  :background-color="var(--faded-match-color)"
></github-stars>`,
};

window.GitHubStars = class {
  bittyInit() {
    if(window.location.hostname !== "localhost") {
      this.api.appendChild(this.api.makeElement(t.stars));
    }
  }
}
</script>

<nav class="default-wrapper">
  <a href="/">bitty</a>

  <a href="/documentation/7/0/0/">documentation</a>

  <a href="/unit-tests/7/0/0/">tests</a>

  <a href="/versions/7/0/0/projects/">projects</a>

  <bitty-7-0 data-connect="GitHubStars"></bitty-7-0>
</nav><header class="default-wrapper">
<hgroup>
  <h1>Project: Details Tag Opener</h1>
</hgroup>
</header><main class="default-wrapper default-flow">

<h2>Overview</h2>
<ul>
<li>
<p>This class stores the open/closed state of
<code class="code-span lang-html"><span class="line-marker"></span><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag other html">details</span><span class="punctuation definition tag end html">&gt;</span></span></span></code>  on the page.</p>
</li>
<li>
<p>Every time a <code class="code-span lang-html"><span class="line-marker"></span><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag other html">details</span><span class="punctuation definition tag end html">&gt;</span></span></span></code>is toggled the state gets stored in localStorage.</p>
</li>
<li>
<p>When the page is reloaded/refreshed the state of each
<code class="code-span lang-html"><span class="line-marker"></span><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag other html">details</span><span class="punctuation definition tag end html">&gt;</span></span></span></code>element is restored.</p>
</li>
</ul>

<h2>Example</h2>

<p>Open and close theses 
<code class="code-span lang-html"><span class="line-marker"></span><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag other html">details</span><span class="punctuation definition tag end html">&gt;</span></span></span></code>  tags then refresh the page. They'll be 
  restored to where you left them.
</p>

<div class="example-block">
<details><summary>alfa</summary>
  <p>the quick</p>
  <p>red fox</p>
</details>

<details open><summary>bravo</summary>
  <p>jumps over</p>
  <p>the lazy</p>
</details>

<details><summary>charlie</summary>
  <p>brown dog</p>
</details>

<details><summary>delta</summary>
  <p>brown dog</p>
</details></div>



<h2>Source Code</h2>

<pre class="code-block"><code><span class="line-marker"></span><span class="source js"><span class="meta export js"><span class="keyword control import-export js">export</span> <span class="variable other readwrite js">class</span> </span><span class="variable other readwrite js">DetailsOpener</span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>  #<span class="variable other readwrite js">state</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">bittyReady</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">loadState</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">setTagState</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">watchTags</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">numberOfTags</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="keyword control flow js">return</span> <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">querySelectorAll</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>details<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation accessor js">.</span><span class="meta property object js">length</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">setTagState</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">querySelectorAll</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>details<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">forEach</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="variable parameter function js">tag</span><span class="punctuation separator parameter function js">,</span> <span class="variable parameter function js">tagIndex</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span>
<span class="line-marker"></span>        <span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other object js">state</span><span class="punctuation accessor js">.</span><span class="meta property object js">openTags</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">has</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">tagIndex</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>      <span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="meta function-call method js"><span class="support type object console js">console</span><span class="punctuation accessor js">.</span><span class="support function console js">log</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">tag</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>        <span class="variable other object js">tag</span><span class="punctuation accessor js">.</span><span class="meta property object js">open</span> <span class="keyword operator assignment js">=</span> <span class="constant language boolean true js">true</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span> <span class="meta conditional js"><span class="keyword control conditional js">else</span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable other object js">tag</span><span class="punctuation accessor js">.</span><span class="meta property object js">open</span> <span class="keyword operator assignment js">=</span> <span class="constant language boolean false js">false</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>    <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">loadState</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">storage</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">localStorage</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">getItem</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">storageName</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other readwrite js">state</span> <span class="keyword operator assignment js">=</span> <span class="meta object-literal js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="meta object-literal key js">numberOfTags</span><span class="punctuation separator key-value js">:</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">numberOfTags</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>      <span class="meta object-literal key js">openTags</span><span class="punctuation separator key-value js">:</span> <span class="meta instance constructor js"><span class="keyword operator word new js">new</span><span class="meta function-call constructor js"> <span class="support class builtin js">Set</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>    <span class="punctuation section block js">}</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">querySelectorAll</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>details<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">forEach</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="variable parameter function js">tag</span><span class="punctuation separator parameter function js">,</span> <span class="variable parameter function js">tagIndex</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">tag</span><span class="punctuation accessor js">.</span><span class="meta property object js">open</span> <span class="keyword operator comparison js">===</span> <span class="constant language boolean true js">true</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other object js">state</span><span class="punctuation accessor js">.</span><span class="meta property object js">openTags</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">add</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">tagIndex</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>    <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">storage</span> <span class="keyword operator comparison js">!==</span> <span class="constant language null js">null</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="storage type js">const</span> <span class="variable other readwrite js">data</span> <span class="keyword operator assignment js">=</span> <span class="variable other object js">JSON</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">parse</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">storage</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation accessor js">.</span><span class="meta property object js">state</span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">numberOfTags</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="keyword operator comparison js">===</span> <span class="variable other object js">data</span><span class="punctuation accessor js">.</span><span class="meta property object js">numberOfTags</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other readwrite js">state</span> <span class="keyword operator assignment js">=</span> <span class="meta object-literal js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>          <span class="meta object-literal key js">numberOfTags</span><span class="punctuation separator key-value js">:</span> <span class="variable other object js">data</span><span class="punctuation accessor js">.</span><span class="meta property object js">numberOfTags</span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>          <span class="meta object-literal key js">openTags</span><span class="punctuation separator key-value js">:</span> <span class="meta instance constructor js"><span class="keyword operator word new js">new</span><span class="meta function-call constructor js"> <span class="support class builtin js">Set</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">data</span><span class="punctuation accessor js">.</span><span class="meta property object js">openTags</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>        <span class="punctuation section block js">}</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>    </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">saveState</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="variable other object js">localStorage</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">setItem</span><span class="meta group js"><span class="punctuation section group js">(</span>
<span class="line-marker"></span>      <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">storageName</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>      <span class="variable other object js">JSON</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">stringify</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta object-literal js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="meta object-literal key js"><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>state<span class="punctuation definition string end js">&quot;</span></span></span><span class="punctuation separator key-value js">:</span> <span class="meta object-literal js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>          <span class="meta object-literal key js">numberOfTags</span><span class="punctuation separator key-value js">:</span> <span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#state.<span class="variable other readwrite js">numberOfTags</span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>          <span class="meta object-literal key js">openTags</span><span class="punctuation separator key-value js">:</span> <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="keyword operator spread js">...</span><span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other object js">state</span><span class="punctuation accessor js">.</span><span class="meta property object js">openTags</span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>        <span class="punctuation section block js">}</span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>      <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation separator comma js">,</span>
<span class="line-marker"></span>    </span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">storageName</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="keyword control flow js">return</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>details-state-</span><span class="meta template expression js"><span class="punctuation definition template-expression begin js">${</span></span><span class="meta template expression js"><span class="source js embedded expression"><span class="support type object dom js">window</span><span class="punctuation accessor js">.</span><span class="meta property object js">location</span><span class="punctuation accessor js">.</span><span class="meta property object js">pathname</span></span><span class="punctuation definition template-expression end js">}</span></span><span class="string template js"><span class="punctuation definition string template end js">`</span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span>  <span class="meta function-call js"><span class="variable function js">watchTags</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">querySelectorAll</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>details<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">forEach</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="variable parameter function js">tag</span><span class="punctuation separator parameter function js">,</span> <span class="variable parameter function js">tagIndex</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>      <span class="variable other object js">tag</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addEventListener</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>toggle<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="variable parameter function js">event</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>        <span class="meta conditional js"><span class="keyword control conditional js">if</span> <span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">tag</span><span class="punctuation accessor js">.</span><span class="meta property object js">open</span><span class="punctuation section group js">)</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>          <span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other object js">state</span><span class="punctuation accessor js">.</span><span class="meta property object js">openTags</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">add</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">tagIndex</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>        </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span> <span class="meta conditional js"><span class="keyword control conditional js">else</span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>          <span class="variable language this js">this</span><span class="punctuation accessor js">.</span>#<span class="variable other object js">state</span><span class="punctuation accessor js">.</span><span class="meta property object js">openTags</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">delete</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other readwrite js">tagIndex</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>        </span><span class="meta block js"><span class="punctuation section block js">}</span></span></span>
<span class="line-marker"></span>        <span class="variable language this js">this</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">saveState</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>      <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>    <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="line-marker"></span>  <span class="punctuation section block js">}</span></span>
<span class="line-marker"></span><span class="punctuation section block js">}</span></span></span></code></pre>
<h2>Notes</h2>
<ul>
<li>
<p>This script isn't really bitty specific.
All the methods are generic with no requirement
for adding <code>data-*</code> attributes to any elements.
bitty is merely used to wrap the class and load
it.</p>
</li>
<li>
<p>Adding <code>open</code> attributes to
<code class="code-span lang-html"><span class="line-marker"></span><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag other html">details</span><span class="punctuation definition tag end html">&gt;</span></span></span></code>  elements directly in the HTML opens
them by default. If an element with an
open attribute is closed it stays closed
on the next refresh regardless of
if the <code>open</code> attribute exists or not.</p>
<p>That provides a way for doing things
like opening an introduction section on
a page by default and then preventing
it from re-opening if the user decides
to close it.</p>
</li>
<li>
<p>Nested
<code class="code-span lang-html"><span class="line-marker"></span><span class="text html basic"><span class="meta tag other html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag other html">details</span><span class="punctuation definition tag end html">&gt;</span></span></span></code>tags maintain their state regardless of their
parent. For example, if you do the following:</p>
<ul>
<li>open a parent tag</li>
<li>open a child tag</li>
<li>close the parent tag</li>
<li>re-open the parent tag</li>
</ul>
<p>The child tag will be open when the
parent is re-opened.</p>
</li>
<li>
<p>If the number of details elements
on the page changes when it's
refreshed/reloaded everything goes
back to its default state (i.e.
any tags with <code>open</code> attributes are
opened and all the other ones are
closed).</p>
</li>
<li>
<p>Data is stored with a key that
uses the <code class="code-span lang-js"><span class="line-marker"></span><span class="source js"><span class="support type object dom js">window</span><span class="punctuation accessor js">.</span><span class="meta property object js">location</span><span class="punctuation accessor js">.</span><span class="meta property object js">pathname</span></span></code>.
If a single URL is used to host multiple
content pages (e.g. in a single page app)
things will get weird. The code would
need to be updated to accommodate that.</p>
</li>
</ul>


</main></bitty-7-0>
</bitty-7-0>
</bitty-7-0><script>
  setTimeout(() => { 
    document.documentElement.style.setProperty("--load-hider", "1");
  }, 1600);
</script>

<footer class="small-wrapper xsmall-flow xxxlarge-top-margin faded-accent-top-border small-font-size large-bottom-margin large-block-padding">
  <div class="text-align-center">
    <a href="https://github.com/alanwsmith/bitty">source</a> ~
    <a href="https://socials.alanwsmith.com/">socials</a> ~
    <a href="https://www.alanwsmith.com/feeds/posts.xml">rss</a> ~
    <a href="https://links.alanwsmith.com/">other projects</a>
  </div>
  <details class="text-align-center"><summary>This work is dedicated to the public domain.</summary>
    <div>By marking the work with a CC0 public domain dedication, the creator is giving up their copyright and allowing reusers to distribute, remix, adapt, and build upon the material in any medium or format, even for commercial purposes.</div>
  </details>
  <div class="text-align-center">
    <a href="https://bitty.alanwsmith.com/">bitty</a> by <a href="https://www.alanwsmith.com/">alan w smith</a> is marked <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a>
  </div>
</footer>
    <script src="/components/github-stars-beta-1.js" type="module"></script>


  </body>
</html>
